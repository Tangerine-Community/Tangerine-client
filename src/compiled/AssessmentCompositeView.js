var AssessmentCompositeView;

AssessmentCompositeView = Backbone.Marionette.CompositeView.extend({
  template: JST["AssessmentView"],
  getChildView: function(model) {
    var currentSubview, prototypeName;
    model.parent = this;
    if (!model.questions) {
      model.questions = new Questions();
    }
    if (model.get("collection") === 'result') {
      currentSubview = ResultItemView;
    } else {
      prototypeName = model.get('prototype').titleize() + "RunItemView";
      if (prototypeName === 'SurveyRunItemView') {
        currentSubview = SurveyRunItemView;
      } else if (prototypeName === 'GridRunItemView') {
        currentSubview = GridRunItemView;
      } else if (prototypeName === 'DatetimeRunItemView') {
        currentSubview = DatetimeRunItemView;
      } else if (prototypeName === 'IdRunItemView') {
        currentSubview = IdRunItemView;
      } else if (prototypeName === 'LocationRunItemView') {
        currentSubview = LocationRunItemView;
      } else if (prototypeName === 'ConsentRunItemView') {
        currentSubview = ConsentRunItemView;
      } else {
        currentSubview = null;
        console.log(prototypeName + "  Subview is not defined.");
      }
    }
    this.ready = true;
    return currentSubview;
    return {
      next: function() {
        console.log("childEvents next");
        return this.step(1);
      }
    };
  },
  childViewOptions: function(model, index) {
    return model.questions.fetch({
      viewOptions: {
        key: "question-" + model.id
      },
      success: (function(_this) {
        return function(collection) {
          model.questions.sort();
          model.collection = model.questions;
          return _this.collection.models = collection.models;
        };
      })(this),
      error: function(model, err, cb) {
        return console.log("childViewOptions error: " + JSON.stringify(err));
      }
    });
  },
  collectionEvents: function() {
    return {
      "add": function() {
        return console.log("model added");
      }
    };
  },
  childViewContainer: '#subtest_wrapper',
  events: {
    'click .subtest-next': 'next',
    'click .subtest-back': 'back',
    'click .subtest_help': 'toggleHelp',
    'click .skip': 'skip'
  },
  i18n: function() {
    return this.text = {
      "next": t("SubtestRunView.button.next"),
      "back": t("SubtestRunView.button.back"),
      "skip": t("SubtestRunView.button.skip"),
      "help": t("SubtestRunView.button.help")
    };
  },
  initialize: function(options) {
    var backable, col, hasSequences, i, j, model, places, ref, resultView, sequences, skippable, ui;
    this.i18n();
    Tangerine.progress = {};
    Tangerine.progress.index = 0;
    this.index = Tangerine.progress.index;
    this.abortAssessment = false;
    this.model = options.model;
    this.orderMap = [];
    this.enableCorrections = false;
    Tangerine.tempData = {};
    this.rendered = {
      "assessment": false,
      "subtest": false
    };
    Tangerine.activity = "assessment run";
    this.subtestViews = [];
    this.model.parent = this;
    this.model.subtests.sort();
    this.model.subtests.each((function(_this) {
      return function(model) {
        model.parent = _this;
        return _this.subtestViews.push(new SubtestRunView({
          model: model,
          parent: _this
        }));
      };
    })(this));
    hasSequences = this.model.has("sequences") && !_.isEmpty(_.compact(_.flatten(this.model.get("sequences"))));
    if (hasSequences) {
      sequences = this.model.get("sequences");
      places = Tangerine.settings.get("sequencePlaces");
      if (places == null) {
        places = {};
      }
      if (places[this.model.id] == null) {
        places[this.model.id] = 0;
      }
      if (places[this.model.id] < sequences.length - 1) {
        places[this.model.id]++;
      } else {
        places[this.model.id] = 0;
      }
      Tangerine.settings.save("sequencePlaces", places);
      this.orderMap = sequences[places[this.model.id]];
      this.orderMap[this.orderMap.length] = this.subtestViews.length;
    } else {
      for (i = j = 0, ref = this.subtestViews.length; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
        this.orderMap[i] = i;
      }
    }
    this.result = new Result({
      assessmentId: this.model.id,
      assessmentName: this.model.get("name"),
      blank: true
    });
    if (hasSequences) {
      this.result.set({
        "order_map": this.orderMap
      });
    }
    resultView = new ResultView({
      model: this.result,
      assessment: this.model,
      assessmentView: this
    });
    this.subtestViews.push(resultView);
    col = {};
    col.models = [];
    model = this.subtestViews[this.orderMap[this.index]].model;
    col.models.push(model);
    this.collection = col;
    ui = {};
    ui.enumeratorHelp = (this.model.get("enumeratorHelp") || "") !== "" ? "<button class='subtest_help command'>" + this.text.help + "</button><div class='enumerator_help' " + (this.fontStyle || "") + ">" + (this.model.get('enumeratorHelp')) + "</div>" : "";
    ui.studentDialog = (this.model.get("studentDialog") || "") !== "" ? "<div class='student_dialog' " + (this.fontStyle || "") + ">" + (this.model.get('studentDialog')) + "</div>" : "";
    ui.transitionComment = (this.model.get("transitionComment") || "") !== "" ? "<div class='student_dialog' " + (this.fontStyle || "") + ">" + (this.model.get('transitionComment')) + "</div> <br>" : "";
    skippable = this.model.get("skippable") === true || this.model.get("skippable") === "true";
    backable = (this.model.get("backButton") === true || this.model.get("backButton") === "true") && this.parent.index !== 0;
    if (skippable) {
      ui.skipButton = "<button class='skip navigation'>" + this.text.skip + "</button>";
    }
    if (backable) {
      ui.backButton = "<button class='subtest-back navigation'>" + this.text.back + "</button>";
    }
    ui.text = this.text;
    return this.model.set('ui', ui);
  },
  onRender: function() {
    this.$el.find('#progress').progressbar({
      value: (this.index + 1) / (this.model.subtests.length + 1) * 100
    });
    Tangerine.progress.currentSubview.on("rendered", (function(_this) {
      return function() {
        return _this.flagRender("subtest");
      };
    })(this));
    Tangerine.progress.currentSubview.on("subRendered", (function(_this) {
      return function() {
        return _this.trigger("subRendered");
      };
    })(this));
    Tangerine.progress.currentSubview.on("next", (function(_this) {
      return function() {
        console.log("currentView next");
        return _this.step(1);
      };
    })(this));
    Tangerine.progress.currentSubview.on("back", (function(_this) {
      return function() {
        return _this.step(-1);
      };
    })(this));
    return this.flagRender("assessment");
  },
  flagRender: function(object) {
    this.rendered[object] = true;
    if (this.rendered.assessment && this.rendered.subtest) {
      return this.trigger("rendered");
    }
  },
  afterRender: function() {
    var ref;
    return (ref = this.subtestViews[this.orderMap[this.index]]) != null ? typeof ref.afterRender === "function" ? ref.afterRender() : void 0 : void 0;
  },
  onClose: function() {
    var j, len, ref, view;
    ref = this.subtestViews;
    for (j = 0, len = ref.length; j < len; j++) {
      view = ref[j];
      view.close();
    }
    this.result.clear();
    return Tangerine.nav.setStudent("");
  },
  abort: function() {
    this.abortAssessment = true;
    return this.step(1);
  },
  skip: (function(_this) {
    return function() {
      var currentView;
      currentView = Tangerine.progress.currentSubview;
      return _this.result.add({
        name: currentView.model.get("name"),
        data: currentView.getSkipped(),
        subtestId: currentView.model.id,
        skipped: true,
        prototype: currentView.model.get("prototype")
      }, {
        success: function() {
          return _this.reset(1);
        }
      });
    };
  })(this),
  step: function(increment) {
    var currentView, valid;
    if (this.abortAssessment) {
      currentView = Tangerine.progress.currentSubview;
      this.saveResult(currentView);
      return;
    }
    currentView = Tangerine.progress.currentSubview;
    if (currentView.testValid != null) {
      valid = currentView.testValid();
      if (valid) {
        return this.saveResult(currentView, increment);
      } else {
        return currentView.showErrors();
      }
    } else {
      return currentView.showErrors();
    }
  },
  next: function() {
    return this.step(1);
  },
  back: function() {
    return this.step(-1);
  },
  toggleHelp: function() {
    return this.$el.find(".enumerator_help").fadeToggle(250);
  },
  getGridScore: function() {
    var grid, gridScore, link;
    link = this.model.get("gridLinkId") || "";
    if (link === "") {
      return;
    }
    grid = this.parent.model.subtests.get(this.model.get("gridLinkId"));
    gridScore = this.parent.result.getGridScore(grid.id);
    return gridScore;
  },
  gridWasAutostopped: function() {
    var grid, gridWasAutostopped, link;
    link = this.model.get("gridLinkId") || "";
    if (link === "") {
      return;
    }
    grid = this.parent.model.subtests.get(this.model.get("gridLinkId"));
    return gridWasAutostopped = this.parent.result.gridWasAutostopped(grid.id);
  },
  reset: function(increment) {
    var model;
    this.rendered.subtest = false;
    this.rendered.assessment = false;
    Tangerine.progress.currentSubview.close();
    this.index = this.abortAssessment === true ? this.subtestViews.length - 1 : this.index + increment;
    model = this.subtestViews[this.orderMap[this.index]].model;
    this.collection.models = [model];
    this.render();
    return window.scrollTo(0, 0);
  },
  saveResult: function(currentView, increment) {
    var getSum, i, j, len, prototype, ref, result, subtestId, subtestReplace, subtestResult;
    subtestResult = currentView.getResult();
    subtestId = currentView.model.id;
    prototype = currentView.model.get("prototype");
    subtestReplace = null;
    ref = this.result.get('subtestData');
    for (i = j = 0, len = ref.length; j < len; i = ++j) {
      result = ref[i];
      if (subtestId === result.subtestId) {
        subtestReplace = i;
      }
    }
    if (subtestReplace !== null) {
      if (typeof currentView.getSum !== 'function') {
        getSum = {
          correct: 0,
          incorrect: 0,
          missing: 0,
          total: 0
        };
      }
      if (prototype !== 'gps') {
        this.result.insert({
          name: currentView.model.get("name"),
          data: subtestResult.body,
          subtestHash: subtestResult.meta.hash,
          subtestId: currentView.model.id,
          prototype: currentView.model.get("prototype"),
          sum: getSum
        });
      }
      return this.reset(increment);
    } else {
      return this.result.add({
        name: currentView.model.get("name"),
        data: subtestResult.body,
        subtestHash: subtestResult.meta.hash,
        subtestId: currentView.model.id,
        prototype: currentView.model.get("prototype"),
        sum: getSum
      }, {
        success: (function(_this) {
          return function() {
            return _this.reset(increment);
          };
        })(this)
      });
    }
  },
  getSum: function() {
    if (Tangerine.progress.currentSubview.getSum != null) {
      return Tangerine.progress.currentSubview.getSum();
    } else {
      return {
        correct: 0,
        incorrect: 0,
        missing: 0,
        total: 0
      };
    }
  }
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvYXNzZXNzbWVudC9Bc3Nlc3NtZW50Q29tcG9zaXRlVmlldy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQTs7QUFBQSx1QkFBQSxHQUEwQixRQUFRLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxNQUFsQyxDQUV4QjtFQUFBLFFBQUEsRUFBVSxHQUFJLENBQUEsZ0JBQUEsQ0FBZDtFQUVBLFlBQUEsRUFBYyxTQUFDLEtBQUQ7QUFDWixRQUFBO0lBQUEsS0FBSyxDQUFDLE1BQU4sR0FBZTtJQUNmLElBQUcsQ0FBQyxLQUFLLENBQUMsU0FBVjtNQUNFLEtBQUssQ0FBQyxTQUFOLEdBQTBCLElBQUEsU0FBQSxDQUFBLEVBRDVCOztJQUVBLElBQUcsS0FBSyxDQUFDLEdBQU4sQ0FBVSxZQUFWLENBQUEsS0FBMkIsUUFBOUI7TUFDRSxjQUFBLEdBQWtCLGVBRHBCO0tBQUEsTUFBQTtNQUdFLGFBQUEsR0FBZ0IsS0FBSyxDQUFDLEdBQU4sQ0FBVSxXQUFWLENBQXNCLENBQUMsUUFBdkIsQ0FBQSxDQUFBLEdBQW9DO01BQ3BELElBQUssYUFBQSxLQUFpQixtQkFBdEI7UUFDRSxjQUFBLEdBQWlCLGtCQURuQjtPQUFBLE1BRUssSUFBSyxhQUFBLEtBQWlCLGlCQUF0QjtRQUNILGNBQUEsR0FBaUIsZ0JBRGQ7T0FBQSxNQUVBLElBQUssYUFBQSxLQUFpQixxQkFBdEI7UUFDSCxjQUFBLEdBQWlCLG9CQURkO09BQUEsTUFFQSxJQUFLLGFBQUEsS0FBaUIsZUFBdEI7UUFDSCxjQUFBLEdBQWlCLGNBRGQ7T0FBQSxNQUVBLElBQUssYUFBQSxLQUFpQixxQkFBdEI7UUFDSCxjQUFBLEdBQWlCLG9CQURkO09BQUEsTUFFQSxJQUFLLGFBQUEsS0FBaUIsb0JBQXRCO1FBQ0gsY0FBQSxHQUFpQixtQkFEZDtPQUFBLE1BQUE7UUFHSCxjQUFBLEdBQWtCO1FBQ2xCLE9BQU8sQ0FBQyxHQUFSLENBQVksYUFBQSxHQUFnQiwyQkFBNUIsRUFK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LENBQUMsS0FBSyxDQUFDLEVBSGhDO1VBSUEsU0FBQSxFQUFjLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBbEIsQ0FBc0IsV0FBdEIsQ0FKZDtVQUtBLEdBQUEsRUFBYyxNQUxkO1NBREYsRUFERjs7YUFRQSxJQUFDLENBQUEsS0FBRCxDQUFPLFNBQVAsRUFiRjtLQUFBLE1BQUE7YUFnQkUsSUFBQyxDQUFBLE1BQU0sQ0FBQyxHQUFSLENBQ0U7UUFBQSxJQUFBLEVBQWMsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFsQixDQUFzQixNQUF0QixDQUFkO1FBQ0EsSUFBQSxFQUFjLGFBQWEsQ0FBQyxJQUQ1QjtRQUVBLFdBQUEsRUFBYyxhQUFhLENBQUMsSUFBSSxDQUFDLElBRmpDO1FBR0EsU0FBQSxFQUFjLFdBQVcsQ0FBQyxLQUFLLENBQUMsRUFIaEM7UUFJQSxTQUFBLEVBQWMsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFsQixDQUFzQixXQUF0QixDQUpkO1FBS0EsR0FBQSxFQUFjLE1BTGQ7T0FERixFQVFFO1FBQUEsT0FBQSxFQUFVLENBQUEsU0FBQSxLQUFBO2lCQUFBLFNBQUE7bUJBQ1IsS0FBQyxDQUFBLEtBQUQsQ0FBTyxTQUFQO1VBRFE7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQVY7T0FSRixFQWhCRjs7RUFYVSxDQWxRWjtFQXdTQSxNQUFBLEVBQVEsU0FBQTtJQUNOLElBQUcsZ0RBQUg7QUFDRSxhQUFPLFNBQVMsQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLE1BQWxDLENBQUEsRUFEVDtLQUFBLE1BQUE7QUFJRSxhQUFPO1FBQUMsT0FBQSxFQUFRLENBQVQ7UUFBVyxTQUFBLEVBQVUsQ0FBckI7UUFBdUIsT0FBQSxFQUFRLENBQS9CO1FBQWlDLEtBQUEsRUFBTSxDQUF2QztRQUpUOztFQURNLENBeFNSO0NBRndCIiwiZmlsZSI6Im1vZHVsZXMvYXNzZXNzbWVudC9Bc3Nlc3NtZW50Q29tcG9zaXRlVmlldy5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIkFzc2Vzc21lbnRDb21wb3NpdGVWaWV3ID0gQmFja2JvbmUuTWFyaW9uZXR0ZS5Db21wb3NpdGVWaWV3LmV4dGVuZFxuXG4gIHRlbXBsYXRlOiBKU1RbXCJBc3Nlc3NtZW50Vmlld1wiXSxcblxuICBnZXRDaGlsZFZpZXc6IChtb2RlbCkgLT5cbiAgICBtb2RlbC5wYXJlbnQgPSBAXG4gICAgaWYgIW1vZGVsLnF1ZXN0aW9uc1xuICAgICAgbW9kZWwucXVlc3Rpb25zICAgICA9IG5ldyBRdWVzdGlvbnMoKVxuICAgIGlmIG1vZGVsLmdldChcImNvbGxlY3Rpb25cIikgPT0gJ3Jlc3VsdCdcbiAgICAgIGN1cnJlbnRTdWJ2aWV3ID0gIFJlc3VsdEl0ZW1WaWV3XG4gICAgZWxzZVxuICAgICAgcHJvdG90eXBlTmFtZSA9IG1vZGVsLmdldCgncHJvdG90eXBlJykudGl0bGVpemUoKSArIFwiUnVuSXRlbVZpZXdcIlxuICAgICAgaWYgIChwcm90b3R5cGVOYW1lID09ICdTdXJ2ZXlSdW5JdGVtVmlldycpXG4gICAgICAgIGN1cnJlbnRTdWJ2aWV3ID0gU3VydmV5UnVuSXRlbVZpZXdcbiAgICAgIGVsc2UgaWYgIChwcm90b3R5cGVOYW1lID09ICdHcmlkUnVuSXRlbVZpZXcnKVxuICAgICAgICBjdXJyZW50U3VidmlldyA9IEdyaWRSdW5JdGVtVmlld1xuICAgICAgZWxzZSBpZiAgKHByb3RvdHlwZU5hbWUgPT0gJ0RhdGV0aW1lUnVuSXRlbVZpZXcnKVxuICAgICAgICBjdXJyZW50U3VidmlldyA9IERhdGV0aW1lUnVuSXRlbVZpZXdcbiAgICAgIGVsc2UgaWYgIChwcm90b3R5cGVOYW1lID09ICdJZFJ1bkl0ZW1WaWV3JylcbiAgICAgICAgY3VycmVudFN1YnZpZXcgPSBJZFJ1bkl0ZW1WaWV3XG4gICAgICBlbHNlIGlmICAocHJvdG90eXBlTmFtZSA9PSAnTG9jYXRpb25SdW5JdGVtVmlldycpXG4gICAgICAgIGN1cnJlbnRTdWJ2aWV3ID0gTG9jYXRpb25SdW5JdGVtVmlld1xuICAgICAgZWxzZSBpZiAgKHByb3RvdHlwZU5hbWUgPT0gJ0NvbnNlbnRSdW5JdGVtVmlldycpXG4gICAgICAgIGN1cnJlbnRTdWJ2aWV3ID0gQ29uc2VudFJ1bkl0ZW1WaWV3XG4gICAgICBlbHNlXG4gICAgICAgIGN1cnJlbnRTdWJ2aWV3ID0gIG51bGxcbiAgICAgICAgY29uc29sZS5sb2cocHJvdG90eXBlTmFtZSArIFwiICBTdWJ2aWV3IGlzIG5vdCBkZWZpbmVkLlwiKVxuXG4gICAgQHJlYWR5ID0gdHJ1ZVxuICAgIHJldHVybiBjdXJyZW50U3Vidmlld1xuXG4gICAgbmV4dDogLT5cbiAgICAgIGNvbnNvbGUubG9nKFwiY2hpbGRFdmVudHMgbmV4dFwiKVxuICAgICAgQHN0ZXAgMVxuXG4gIGNoaWxkVmlld09wdGlvbnM6IChtb2RlbCwgaW5kZXgpIC0+XG4jICAgIGNvbnNvbGUubG9nKFwiZmV0Y2hpbmcgbW9kZWwucXVlc3Rpb25zIC0gIFwiICsgSlNPTi5zdHJpbmdpZnkobW9kZWwpKVxuICAgIG1vZGVsLnF1ZXN0aW9ucy5mZXRjaFxuICAgICAgdmlld09wdGlvbnM6XG4gICAgICAgIGtleTogXCJxdWVzdGlvbi0je21vZGVsLmlkfVwiXG4gICAgICBzdWNjZXNzOiAoY29sbGVjdGlvbikgPT5cbiMgICAgICAgIGNvbnNvbGUubG9nIFwiY29sbGVjdGlvbjogXCIgKyBKU09OLnN0cmluZ2lmeShjb2xsZWN0aW9uKVxuICAgICAgICBtb2RlbC5xdWVzdGlvbnMuc29ydCgpXG4gICAgICAgIG1vZGVsLmNvbGxlY3Rpb24gPSBtb2RlbC5xdWVzdGlvbnNcbiAgICAgICAgQGNvbGxlY3Rpb24ubW9kZWxzID0gY29sbGVjdGlvbi5tb2RlbHNcbiAgICAgIGVycm9yOiAobW9kZWwsIGVyciwgY2IpIC0+XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2hpbGRWaWV3T3B0aW9ucyBlcnJvcjogXCIgKyBKU09OLnN0cmluZ2lmeShlcnIpKVxuXG4gIGNvbGxlY3Rpb25FdmVudHM6LT5cbiAgICBcImFkZFwiOiAtPlxuICAgICAgY29uc29sZS5sb2coXCJtb2RlbCBhZGRlZFwiKVxuXG4gIGNoaWxkVmlld0NvbnRhaW5lcjogJyNzdWJ0ZXN0X3dyYXBwZXInLFxuXG4gIGV2ZW50czpcbiAgICAnY2xpY2sgLnN1YnRlc3QtbmV4dCcgOiAnbmV4dCdcbiAgICAnY2xpY2sgLnN1YnRlc3QtYmFjaycgOiAnYmFjaydcbiAgICAnY2xpY2sgLnN1YnRlc3RfaGVscCcgOiAndG9nZ2xlSGVscCdcbiAgICAnY2xpY2sgLnNraXAnICAgICAgICAgOiAnc2tpcCdcblxuICBpMThuOiAtPlxuICAgIEB0ZXh0ID1cbiAgICAgIFwibmV4dFwiIDogdChcIlN1YnRlc3RSdW5WaWV3LmJ1dHRvbi5uZXh0XCIpXG4gICAgICBcImJhY2tcIiA6IHQoXCJTdWJ0ZXN0UnVuVmlldy5idXR0b24uYmFja1wiKVxuICAgICAgXCJza2lwXCIgOiB0KFwiU3VidGVzdFJ1blZpZXcuYnV0dG9uLnNraXBcIilcbiAgICAgIFwiaGVscFwiIDogdChcIlN1YnRlc3RSdW5WaWV3LmJ1dHRvbi5oZWxwXCIpXG5cbiAgaW5pdGlhbGl6ZTogKG9wdGlvbnMpIC0+XG5cbiAgICBAaTE4bigpXG5cbiAgICBUYW5nZXJpbmUucHJvZ3Jlc3MgPSB7fVxuICAgIFRhbmdlcmluZS5wcm9ncmVzcy5pbmRleCA9IDBcbiAgICBAaW5kZXggPSBUYW5nZXJpbmUucHJvZ3Jlc3MuaW5kZXhcblxuICAgIEBhYm9ydEFzc2Vzc21lbnQgPSBmYWxzZVxuICAgIEBtb2RlbCA9IG9wdGlvbnMubW9kZWxcblxuICAgIEBvcmRlck1hcCA9IFtdXG4gICAgQGVuYWJsZUNvcnJlY3Rpb25zID0gZmFsc2UgICMgdG9nZ2xlZCBpZiB1c2VyIGhpdHMgdGhlIGJhY2sgYnV0dG9uLlxuXG4gICAgVGFuZ2VyaW5lLnRlbXBEYXRhID0ge31cblxuICAgIEByZW5kZXJlZCA9IHtcbiAgICAgIFwiYXNzZXNzbWVudFwiIDogZmFsc2VcbiAgICAgIFwic3VidGVzdFwiIDogZmFsc2VcbiAgICB9XG5cbiAgICBUYW5nZXJpbmUuYWN0aXZpdHkgPSBcImFzc2Vzc21lbnQgcnVuXCJcbiAgICBAc3VidGVzdFZpZXdzID0gW11cbiAgICBAbW9kZWwucGFyZW50ID0gQFxuICAgIEBtb2RlbC5zdWJ0ZXN0cy5zb3J0KClcbiAgICBAbW9kZWwuc3VidGVzdHMuZWFjaCAobW9kZWwpID0+XG4gICAgICBtb2RlbC5wYXJlbnQgPSBAXG4gICAgICBAc3VidGVzdFZpZXdzLnB1c2ggbmV3IFN1YnRlc3RSdW5WaWV3XG4gICAgICAgIG1vZGVsICA6IG1vZGVsXG4gICAgICAgIHBhcmVudCA6IEBcblxuXG4gICAgaGFzU2VxdWVuY2VzID0gQG1vZGVsLmhhcyhcInNlcXVlbmNlc1wiKSAmJiBub3QgXy5pc0VtcHR5KF8uY29tcGFjdChfLmZsYXR0ZW4oQG1vZGVsLmdldChcInNlcXVlbmNlc1wiKSkpKVxuXG4gICAgaWYgaGFzU2VxdWVuY2VzXG4gICAgICBzZXF1ZW5jZXMgPSBAbW9kZWwuZ2V0KFwic2VxdWVuY2VzXCIpXG5cbiAgICAgICMgZ2V0IG9yIGluaXRpYWxpemUgc2VxdWVuY2UgcGxhY2VzXG4gICAgICBwbGFjZXMgPSBUYW5nZXJpbmUuc2V0dGluZ3MuZ2V0KFwic2VxdWVuY2VQbGFjZXNcIilcbiAgICAgIHBsYWNlcyA9IHt9IHVubGVzcyBwbGFjZXM/XG4gICAgICBwbGFjZXNbQG1vZGVsLmlkXSA9IDAgdW5sZXNzIHBsYWNlc1tAbW9kZWwuaWRdP1xuXG4gICAgICBpZiBwbGFjZXNbQG1vZGVsLmlkXSA8IHNlcXVlbmNlcy5sZW5ndGggLSAxXG4gICAgICAgIHBsYWNlc1tAbW9kZWwuaWRdKytcbiAgICAgIGVsc2VcbiAgICAgICAgcGxhY2VzW0Btb2RlbC5pZF0gPSAwXG5cbiAgICAgIFRhbmdlcmluZS5zZXR0aW5ncy5zYXZlKFwic2VxdWVuY2VQbGFjZXNcIiwgcGxhY2VzKVxuXG4gICAgICBAb3JkZXJNYXAgPSBzZXF1ZW5jZXNbcGxhY2VzW0Btb2RlbC5pZF1dXG4gICAgICBAb3JkZXJNYXBbQG9yZGVyTWFwLmxlbmd0aF0gPSBAc3VidGVzdFZpZXdzLmxlbmd0aFxuICAgIGVsc2VcbiAgICAgIGZvciBpIGluIFswLi5Ac3VidGVzdFZpZXdzLmxlbmd0aF1cbiAgICAgICAgQG9yZGVyTWFwW2ldID0gaVxuXG4gICAgQHJlc3VsdCA9IG5ldyBSZXN1bHRcbiAgICAgIGFzc2Vzc21lbnRJZCAgIDogQG1vZGVsLmlkXG4gICAgICBhc3Nlc3NtZW50TmFtZSA6IEBtb2RlbC5nZXQgXCJuYW1lXCJcbiAgICAgIGJsYW5rICAgICAgICAgIDogdHJ1ZVxuXG4gICAgaWYgaGFzU2VxdWVuY2VzIHRoZW4gQHJlc3VsdC5zZXQoXCJvcmRlcl9tYXBcIiA6IEBvcmRlck1hcClcblxuICAgIHJlc3VsdFZpZXcgPSBuZXcgUmVzdWx0Vmlld1xuICAgICAgbW9kZWwgICAgICAgICAgOiBAcmVzdWx0XG4gICAgICBhc3Nlc3NtZW50ICAgICA6IEBtb2RlbFxuICAgICAgYXNzZXNzbWVudFZpZXcgOiBAXG4gICAgQHN1YnRlc3RWaWV3cy5wdXNoIHJlc3VsdFZpZXdcblxuICAgIGNvbCA9IHt9XG4gICAgY29sLm1vZGVscyA9IFtdXG4gICAgIyAgICBtb2RlbCA9IEBtb2RlbC5zdWJ0ZXN0cy5tb2RlbHNbQGluZGV4XVxuICAgIG1vZGVsID0gQHN1YnRlc3RWaWV3c1tAb3JkZXJNYXBbQGluZGV4XV0ubW9kZWxcbiMgICAgQGNvbGxlY3Rpb24ubW9kZWxzID0gW21vZGVsXVxuICAgIGNvbC5tb2RlbHMucHVzaCBtb2RlbFxuICAgIEBjb2xsZWN0aW9uID0gY29sXG5cbiAgICB1aSA9IHt9XG4gICAgdWkuZW51bWVyYXRvckhlbHAgPSBpZiAoQG1vZGVsLmdldChcImVudW1lcmF0b3JIZWxwXCIpIHx8IFwiXCIpICE9IFwiXCIgdGhlbiBcIjxidXR0b24gY2xhc3M9J3N1YnRlc3RfaGVscCBjb21tYW5kJz4je0B0ZXh0LmhlbHB9PC9idXR0b24+PGRpdiBjbGFzcz0nZW51bWVyYXRvcl9oZWxwJyAje0Bmb250U3R5bGUgfHwgXCJcIn0+I3tAbW9kZWwuZ2V0ICdlbnVtZXJhdG9ySGVscCd9PC9kaXY+XCIgZWxzZSBcIlwiXG4gICAgdWkuc3R1ZGVudERpYWxvZyAgPSBpZiAoQG1vZGVsLmdldChcInN0dWRlbnREaWFsb2dcIikgIHx8IFwiXCIpICE9IFwiXCIgdGhlbiBcIjxkaXYgY2xhc3M9J3N0dWRlbnRfZGlhbG9nJyAje0Bmb250U3R5bGUgfHwgXCJcIn0+I3tAbW9kZWwuZ2V0ICdzdHVkZW50RGlhbG9nJ308L2Rpdj5cIiBlbHNlIFwiXCJcbiAgICB1aS50cmFuc2l0aW9uQ29tbWVudCAgPSBpZiAoQG1vZGVsLmdldChcInRyYW5zaXRpb25Db21tZW50XCIpICB8fCBcIlwiKSAhPSBcIlwiIHRoZW4gXCI8ZGl2IGNsYXNzPSdzdHVkZW50X2RpYWxvZycgI3tAZm9udFN0eWxlIHx8IFwiXCJ9PiN7QG1vZGVsLmdldCAndHJhbnNpdGlvbkNvbW1lbnQnfTwvZGl2PiA8YnI+XCIgZWxzZSBcIlwiXG5cbiAgICBza2lwcGFibGUgPSBAbW9kZWwuZ2V0KFwic2tpcHBhYmxlXCIpID09IHRydWUgfHwgQG1vZGVsLmdldChcInNraXBwYWJsZVwiKSA9PSBcInRydWVcIlxuICAgIGJhY2thYmxlID0gKCBAbW9kZWwuZ2V0KFwiYmFja0J1dHRvblwiKSA9PSB0cnVlIHx8IEBtb2RlbC5nZXQoXCJiYWNrQnV0dG9uXCIpID09IFwidHJ1ZVwiICkgYW5kIEBwYXJlbnQuaW5kZXggaXNudCAwXG5cbiAgICB1aS5za2lwQnV0dG9uID0gXCI8YnV0dG9uIGNsYXNzPSdza2lwIG5hdmlnYXRpb24nPiN7QHRleHQuc2tpcH08L2J1dHRvbj5cIiBpZiBza2lwcGFibGVcbiAgICB1aS5iYWNrQnV0dG9uID0gXCI8YnV0dG9uIGNsYXNzPSdzdWJ0ZXN0LWJhY2sgbmF2aWdhdGlvbic+I3tAdGV4dC5iYWNrfTwvYnV0dG9uPlwiIGlmIGJhY2thYmxlXG4gICAgdWkudGV4dCA9IEB0ZXh0XG4gICAgQG1vZGVsLnNldCgndWknLCB1aSlcblxuICBvblJlbmRlcjotPlxuIyAgICBUYW5nZXJpbmUucHJvZ3Jlc3MuY3VycmVudFN1YnZpZXc/LnVwZGF0ZUV4ZWN1dGVSZWFkeT8odHJ1ZSlcbiAgICBAJGVsLmZpbmQoJyNwcm9ncmVzcycpLnByb2dyZXNzYmFyIHZhbHVlIDogKCAoIEBpbmRleCArIDEgKSAvICggQG1vZGVsLnN1YnRlc3RzLmxlbmd0aCArIDEgKSAqIDEwMCApXG5cbiAgICBUYW5nZXJpbmUucHJvZ3Jlc3MuY3VycmVudFN1YnZpZXcub24gXCJyZW5kZXJlZFwiLCAgICA9PiBAZmxhZ1JlbmRlciBcInN1YnRlc3RcIlxuICAgIFRhbmdlcmluZS5wcm9ncmVzcy5jdXJyZW50U3Vidmlldy5vbiBcInN1YlJlbmRlcmVkXCIsID0+IEB0cmlnZ2VyIFwic3ViUmVuZGVyZWRcIlxuXG4gICAgVGFuZ2VyaW5lLnByb2dyZXNzLmN1cnJlbnRTdWJ2aWV3Lm9uIFwibmV4dFwiLCAgICA9PlxuICAgICAgY29uc29sZS5sb2coXCJjdXJyZW50VmlldyBuZXh0XCIpXG4gICAgICBAc3RlcCAxXG4gICAgVGFuZ2VyaW5lLnByb2dyZXNzLmN1cnJlbnRTdWJ2aWV3Lm9uIFwiYmFja1wiLCAgICA9PiBAc3RlcCAtMVxuICAgIEBmbGFnUmVuZGVyIFwiYXNzZXNzbWVudFwiXG5cblxuICBmbGFnUmVuZGVyOiAob2JqZWN0KSAtPlxuICAgIEByZW5kZXJlZFtvYmplY3RdID0gdHJ1ZVxuXG4gICAgaWYgQHJlbmRlcmVkLmFzc2Vzc21lbnQgJiYgQHJlbmRlcmVkLnN1YnRlc3RcbiAgICAgIEB0cmlnZ2VyIFwicmVuZGVyZWRcIlxuXG4gIGFmdGVyUmVuZGVyOiAtPlxuICAgIEBzdWJ0ZXN0Vmlld3NbQG9yZGVyTWFwW0BpbmRleF1dPy5hZnRlclJlbmRlcj8oKVxuXG4gIG9uQ2xvc2U6IC0+XG4gICAgZm9yIHZpZXcgaW4gQHN1YnRlc3RWaWV3c1xuICAgICAgdmlldy5jbG9zZSgpXG4gICAgQHJlc3VsdC5jbGVhcigpXG4gICAgVGFuZ2VyaW5lLm5hdi5zZXRTdHVkZW50IFwiXCJcblxuICBhYm9ydDogLT5cbiAgICBAYWJvcnRBc3Nlc3NtZW50ID0gdHJ1ZVxuICAgIEBzdGVwIDFcblxuICBza2lwOiA9PlxuICAgIGN1cnJlbnRWaWV3ID0gVGFuZ2VyaW5lLnByb2dyZXNzLmN1cnJlbnRTdWJ2aWV3XG4gICAgQHJlc3VsdC5hZGRcbiAgICAgIG5hbWUgICAgICA6IGN1cnJlbnRWaWV3Lm1vZGVsLmdldCBcIm5hbWVcIlxuICAgICAgZGF0YSAgICAgIDogY3VycmVudFZpZXcuZ2V0U2tpcHBlZCgpXG4gICAgICBzdWJ0ZXN0SWQgOiBjdXJyZW50Vmlldy5tb2RlbC5pZFxuICAgICAgc2tpcHBlZCAgIDogdHJ1ZVxuICAgICAgcHJvdG90eXBlIDogY3VycmVudFZpZXcubW9kZWwuZ2V0IFwicHJvdG90eXBlXCJcbiAgICAsXG4gICAgICBzdWNjZXNzOiA9PlxuICAgICAgICBAcmVzZXQgMVxuXG4gIHN0ZXA6IChpbmNyZW1lbnQpIC0+XG5cbiAgICBpZiBAYWJvcnRBc3Nlc3NtZW50XG4gICAgICBjdXJyZW50VmlldyA9IFRhbmdlcmluZS5wcm9ncmVzcy5jdXJyZW50U3Vidmlld1xuICAgICAgQHNhdmVSZXN1bHQoIGN1cnJlbnRWaWV3IClcbiAgICAgIHJldHVyblxuXG4gICAgY3VycmVudFZpZXcgPSBUYW5nZXJpbmUucHJvZ3Jlc3MuY3VycmVudFN1YnZpZXdcblxuICAgIGlmIGN1cnJlbnRWaWV3LnRlc3RWYWxpZD9cbiAgICAgIHZhbGlkID0gY3VycmVudFZpZXcudGVzdFZhbGlkKClcbiMgICAgICBjb25zb2xlLmxvZyhcInZhbGlkOiBcIiArIHZhbGlkKVxuICAgICAgaWYgdmFsaWRcbiMgICAgICAgIGNvbnNvbGUubG9nKFwib2sgdG8gc2F2ZVJlc3VsdFwiKVxuICAgICAgICBAc2F2ZVJlc3VsdCggY3VycmVudFZpZXcsIGluY3JlbWVudCApXG4gICAgICBlbHNlXG4jICAgICAgICBjb25zb2xlLmxvZyhcIm5vdCB2YWxpZFwiKVxuICAgICAgICBjdXJyZW50Vmlldy5zaG93RXJyb3JzKClcbiAgICBlbHNlXG4jICAgICAgY29uc29sZS5sb2coXCJubyB0ZXN0VmFsaWRcIilcbiAgICAgIGN1cnJlbnRWaWV3LnNob3dFcnJvcnMoKVxuXG4jICAgICAgZnJvbSBTdWJ0ZXN0UnVuVmlld1xuICBuZXh0OiAtPlxuIyAgICBjb25zb2xlLmxvZyhcIm5leHRcIilcbiAgICAjICAgIEB0cmlnZ2VyIFwibmV4dFwiXG4gICAgQHN0ZXAgMVxuIyAgYmFjazogLT4gQHRyaWdnZXIgXCJiYWNrXCJcbiAgYmFjazogLT5cbiAgICBAc3RlcCAtMVxuICB0b2dnbGVIZWxwOiAtPiBAJGVsLmZpbmQoXCIuZW51bWVyYXRvcl9oZWxwXCIpLmZhZGVUb2dnbGUoMjUwKVxuXG4gIGdldEdyaWRTY29yZTogLT5cbiAgICBsaW5rID0gQG1vZGVsLmdldChcImdyaWRMaW5rSWRcIikgfHwgXCJcIlxuICAgIGlmIGxpbmsgPT0gXCJcIiB0aGVuIHJldHVyblxuICAgIGdyaWQgPSBAcGFyZW50Lm1vZGVsLnN1YnRlc3RzLmdldCBAbW9kZWwuZ2V0KFwiZ3JpZExpbmtJZFwiKVxuICAgIGdyaWRTY29yZSA9IEBwYXJlbnQucmVzdWx0LmdldEdyaWRTY29yZSBncmlkLmlkXG4gICAgZ3JpZFNjb3JlXG5cbiAgZ3JpZFdhc0F1dG9zdG9wcGVkOiAtPlxuICAgIGxpbmsgPSBAbW9kZWwuZ2V0KFwiZ3JpZExpbmtJZFwiKSB8fCBcIlwiXG4gICAgaWYgbGluayA9PSBcIlwiIHRoZW4gcmV0dXJuXG4gICAgZ3JpZCA9IEBwYXJlbnQubW9kZWwuc3VidGVzdHMuZ2V0IEBtb2RlbC5nZXQoXCJncmlkTGlua0lkXCIpXG4gICAgZ3JpZFdhc0F1dG9zdG9wcGVkID0gQHBhcmVudC5yZXN1bHQuZ3JpZFdhc0F1dG9zdG9wcGVkIGdyaWQuaWRcblxuICByZXNldDogKGluY3JlbWVudCkgLT5cbiAgICBAcmVuZGVyZWQuc3VidGVzdCA9IGZhbHNlXG4gICAgQHJlbmRlcmVkLmFzc2Vzc21lbnQgPSBmYWxzZVxuICAgIFRhbmdlcmluZS5wcm9ncmVzcy5jdXJyZW50U3Vidmlldy5jbG9zZSgpO1xuICAgIEBpbmRleCA9XG4gICAgICBpZiBAYWJvcnRBc3Nlc3NtZW50ID09IHRydWVcbiAgICAgICAgQHN1YnRlc3RWaWV3cy5sZW5ndGgtMVxuICAgICAgZWxzZVxuICAgICAgICBAaW5kZXggKyBpbmNyZW1lbnRcbiAgICBtb2RlbCA9IEBzdWJ0ZXN0Vmlld3NbQG9yZGVyTWFwW0BpbmRleF1dLm1vZGVsXG4gICAgQGNvbGxlY3Rpb24ubW9kZWxzID0gW21vZGVsXVxuICAgIEByZW5kZXIoKVxuICAgIHdpbmRvdy5zY3JvbGxUbyAwLCAwXG5cbiAgc2F2ZVJlc3VsdDogKCBjdXJyZW50VmlldywgaW5jcmVtZW50ICkgLT5cblxuICAgIHN1YnRlc3RSZXN1bHQgPSBjdXJyZW50Vmlldy5nZXRSZXN1bHQoKVxuICAgIHN1YnRlc3RJZCA9IGN1cnJlbnRWaWV3Lm1vZGVsLmlkXG4gICAgcHJvdG90eXBlID0gY3VycmVudFZpZXcubW9kZWwuZ2V0IFwicHJvdG90eXBlXCJcbiAgICBzdWJ0ZXN0UmVwbGFjZSA9IG51bGxcblxuICAgIGZvciByZXN1bHQsIGkgaW4gQHJlc3VsdC5nZXQoJ3N1YnRlc3REYXRhJylcbiAgICAgIGlmIHN1YnRlc3RJZCA9PSByZXN1bHQuc3VidGVzdElkXG4gICAgICAgIHN1YnRlc3RSZXBsYWNlID0gaVxuXG4gICAgaWYgc3VidGVzdFJlcGxhY2UgIT0gbnVsbFxuICAgICAgaWYgdHlwZW9mIGN1cnJlbnRWaWV3LmdldFN1bSAhPSAnZnVuY3Rpb24nXG4gICAgICAgIGdldFN1bSA9IHtjb3JyZWN0OjAsaW5jb3JyZWN0OjAsbWlzc2luZzowLHRvdGFsOjB9XG5cbiMgRG9uJ3QgdXBkYXRlIHRoZSBncHMgc3VidGVzdC5cbiAgICAgIGlmIHByb3RvdHlwZSAhPSAnZ3BzJ1xuICAgICAgICBAcmVzdWx0Lmluc2VydFxuICAgICAgICAgIG5hbWUgICAgICAgIDogY3VycmVudFZpZXcubW9kZWwuZ2V0IFwibmFtZVwiXG4gICAgICAgICAgZGF0YSAgICAgICAgOiBzdWJ0ZXN0UmVzdWx0LmJvZHlcbiAgICAgICAgICBzdWJ0ZXN0SGFzaCA6IHN1YnRlc3RSZXN1bHQubWV0YS5oYXNoXG4gICAgICAgICAgc3VidGVzdElkICAgOiBjdXJyZW50Vmlldy5tb2RlbC5pZFxuICAgICAgICAgIHByb3RvdHlwZSAgIDogY3VycmVudFZpZXcubW9kZWwuZ2V0IFwicHJvdG90eXBlXCJcbiAgICAgICAgICBzdW0gICAgICAgICA6IGdldFN1bVxuICAgICAgQHJlc2V0IGluY3JlbWVudFxuXG4gICAgZWxzZVxuICAgICAgQHJlc3VsdC5hZGRcbiAgICAgICAgbmFtZSAgICAgICAgOiBjdXJyZW50Vmlldy5tb2RlbC5nZXQgXCJuYW1lXCJcbiAgICAgICAgZGF0YSAgICAgICAgOiBzdWJ0ZXN0UmVzdWx0LmJvZHlcbiAgICAgICAgc3VidGVzdEhhc2ggOiBzdWJ0ZXN0UmVzdWx0Lm1ldGEuaGFzaFxuICAgICAgICBzdWJ0ZXN0SWQgICA6IGN1cnJlbnRWaWV3Lm1vZGVsLmlkXG4gICAgICAgIHByb3RvdHlwZSAgIDogY3VycmVudFZpZXcubW9kZWwuZ2V0IFwicHJvdG90eXBlXCJcbiAgICAgICAgc3VtICAgICAgICAgOiBnZXRTdW1cbiAgICAgICxcbiAgICAgICAgc3VjY2VzcyA6ID0+XG4gICAgICAgICAgQHJlc2V0IGluY3JlbWVudFxuXG4gIGdldFN1bTogLT5cbiAgICBpZiBUYW5nZXJpbmUucHJvZ3Jlc3MuY3VycmVudFN1YnZpZXcuZ2V0U3VtP1xuICAgICAgcmV0dXJuIFRhbmdlcmluZS5wcm9ncmVzcy5jdXJyZW50U3Vidmlldy5nZXRTdW0oKVxuICAgIGVsc2VcbiMgbWF5YmUgYSBiZXR0ZXIgZmFsbGJhY2tcbiAgICAgIHJldHVybiB7Y29ycmVjdDowLGluY29ycmVjdDowLG1pc3Npbmc6MCx0b3RhbDowfVxuIl19
